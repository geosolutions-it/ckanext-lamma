{# 
Renders a list of resources with icons and view links.

resources - A list of resources to render
pkg - A package object that the resources belong to.

Example:

  {% snippet "package/snippets/resources_list.html", pkg=pkg, resources=pkg.resources %}

#}
<section id="dataset-resources" class="resources">
  {#<h3>{{ _('Data and Resources') }}</h3>#}
  
  {% block resource_list %}
  
    {% if resources %}
    
    {% block resource_list_other %}
        <ul class="resource-list">
        <legend><i class="icon-download-alt"></i> Download delle risorse</legend>
            {% for resource in resources %}
                {% if resource.format != "wms"%}
                    {% snippet 'package/snippets/resource_item_other.html', pkg=pkg, res=resource %}
                {% endif %}
            {% endfor %}
        </ul>
    {% endblock %}

    {% block resource_list_wms %}
    
        {% set wms_exists = [] %}
        
        {% for resource in resources %}
            {% if resource.format == "wms"%}
                {% do wms_exists.append(resource) %}
            {% endif %}
        {% endfor %}

        {% if wms_exists[0] %}
            <ul class="resource-list">
            <legend><i class="icon-share"></i> Anteprima delle risorse</legend>
                {% for resource in wms_exists %}
                    {% snippet 'package/snippets/resource_item_wms.html', pkg=pkg, res=resource %}
                {% endfor %}
            </ul>
        {% endif %}
        
    {% endblock %}
     
    {% else %}
      {% if h.check_access('resource_create', pkg) %}
          {% trans url=h.url_for(controller='package', action='new_resource', id=pkg.name) %}
            <p class="empty">This dataset has no data, <a href="{{ url }}">why not add some?</a></p>
          {% endtrans %}
      {% else %}
          <p class="empty">{{ _('This dataset has no data') }}</p>
      {% endif %}
    {% endif %}
    
    {% endblock %}    
</section>
